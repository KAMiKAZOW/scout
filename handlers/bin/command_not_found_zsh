function preexec() {
    command="${1%% *}"
}

function precmd() {
    (($?)) && [ -n "$command" ] && {
        whence -- "$command" >& /dev/null ||
            command-not-found "$command"
        unset command
    }
}
